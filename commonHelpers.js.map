{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const pagination = {\n  page: 1,\n  perPage: 15,\n};\n\nconst spinner = document.querySelector('.loader');\n\nfunction showSpinner() {\n  spinner.style.display = 'flex';\n}\n\nexport function hideSpinner() {\n  spinner.style.display = 'none';\n}\n\nexport async function fetchImages(query) {\n  const params = new URLSearchParams({\n    key: '44914505-36a6b847b314a6ef1bce975f7',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: pagination.perPage,\n    page: pagination.page,\n  });\n  showSpinner();\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?${params}`);\n    return response.data;\n  } catch (error) {\n    onFetchError(error);\n    throw error;\n  } finally {\n    hideSpinner();\n  }\n}\n\nexport function onFetchError(error) {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n","//\n// import axios from 'axios';\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\n// export const cardContainer = document.querySelector('.card-container');\n\n// export function renderImgCard(dataArr) {\n//   const markupImages = dataArr\n//     .map(\n//       ({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         views,\n//         comments,\n//         downloads,\n//       }) =>\n//         `<li class=\"gallery-item\">\n//             <a class=\"gallery-link\" href=\"${largeImageURL}\">\n//                 <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n//                 <ul class=\"gallery-text-list\">\n//                     <li class=\"gallery-text-item\"><h3>Likes</h3><p>${likes}</p></li>\n//                     <li class=\"gallery-text-item\"><h3>Views</h3><p>${views}</p></li>\n//                     <li class=\"gallery-text-item\"><h3>Comments</h3><p>${comments}</p></li>\n//                     <li class=\"gallery-text-item\"><h3>Downloads</h3><p>${downloads}</p></li>\n//                 </ul>\n//             </a>\n//         </li>`\n//     )\n//     .join('');\n//   cardContainer.insertAdjacentHTML('beforeend', markupImages);\n\n//   const lightbox = new SimpleLightbox('.card-container a', {\n//     captionsData: 'alt',\n//     captionPosition: 'bottom',\n//   });\n\n//   lightbox.refresh();\n// }\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst cardContainer = document.querySelector('.card-container');\n\nexport function renderImgCard(dataArr) {\n  const markupImages = dataArr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n                <ul class=\"gallery-text-list\">\n                    <li class=\"gallery-text-item\"><h3>Likes</h3><p>${likes}</p></li>\n                    <li class=\"gallery-text-item\"><h3>Views</h3><p>${views}</p></li>\n                    <li class=\"gallery-text-item\"><h3>Comments</h3><p>${comments}</p></li>\n                    <li class=\"gallery-text-item\"><h3>Downloads</h3><p>${downloads}</p></li>\n                </ul>\n            </a>\n        </li>`\n    )\n    .join('');\n  cardContainer.innerHTML = markupImages;\n\n  const lightbox = new SimpleLightbox('.card-container a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n  });\n\n  lightbox.refresh();\n}\n","// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\n// import {\n//   fetchImages,\n//   onFetchError,\n//   hideSpinner,\n//   pagination,\n// } from './js/pixabay-api';\n\n// import { renderImgCard, cardContainer } from './js/render-functions';\n\n// const searchForm = document.querySelector('.search-form');\n// const cardContainer = document.querySelector('.card-container');\n// const loadMoreButton = document.querySelector('.button-load-more');\n// const loader = document.querySelector('.loader');\n// const hiddenClass = 'is-hidden';\n\n// let currentPage = 0;\n// let currentQuery = '';\n\n// searchForm.addEventListener('submit', handleSearch);\n\n// export function showSpinner() {\n//   spinner.style.display = 'flex';\n// }\n// function hidden(button) {\n//   button.classList.add(hiddenClass);\n// }\n// function show(button) {\n//   button.classList.remove(hiddenClass);\n// }\n\n// function disable(button) {\n//   button.disabled = true;\n// }\n\n// function enable(button) {\n//   button.disabled = false;\n// }\n\n// hidden(buttonLoadMore);\n\n// async function handleSearch(event) {\n//   event.preventDefault();\n//   cardContainer.innerHTML = '';\n//   pagination.page = 1;\n//   const form = event.currentTarget;\n//   const queryValue = form.elements.query.value.trim();\n\n//   if (queryValue === '') {\n//     iziToast.error({\n//       title: 'Error',\n//       message: 'Please enter a search term!',\n//       position: 'topRight',\n//     });\n//     form.reset();\n//     return;\n//   }\n\n//   try {\n//     let data = await fetchImages(queryValue);\n//     renderImgCard(data.hits);\n//     show(buttonLoadMore);\n//     totalPages = Math.ceil(data.total / pagination.perPage);\n\n//     if (pagination.page > currentPage) {\n//       hidden(buttonLoadMore);\n//       return iziToast.error({\n//         message: \"We're sorry, but you've reached the end of search results.\",\n//         position: 'topRight',\n//       });\n//     }\n//     enable(buttonLoadMore);\n\n//     buttonLoadMore.addEventListener('click', handleLoadMore);\n//   } catch (error) {\n//     onFetchError(error);\n//   } finally {\n//     form.reset();\n//     hideSpinner();\n//     form.reset();\n//   }\n// }\n\n// async function handleLoadMore() {\n//   disable(buttonLoadMore);\n//   pagination.page += 1;\n\n//   try {\n//     let data = await getPicturesByQuery(queryValue);\n//     renderImgCard(data.hits);\n\n//     const galleryItem = document.querySelector('.gallery-item');\n//     const itemHeight = galleryItem.getBoundingClientRect().height;\n//     window.scrollBy({\n//       top: itemHeight * 2,\n//       behavior: 'smooth',\n//     });\n//   } catch (error) {\n//     console.error(error);\n//     onFetchError();\n//   } finally {\n//     enable(buttonLoadMore);\n\n//     if (pagination.page >= totalPages) {\n//       hide(buttonLoadMore);\n\n//       btnLoadMore.removeEventListener('click', handleLoadMore);\n//       iziToast.warning({\n//         title: 'Error',\n//         message: \"We're sorry, but you've reached the end of search results.\",\n//         position: 'topRight',\n//       });\n//     }\n//     hideSpinner();\n//   }\n// }\n\n// import {\n//   fetchImages,\n//   onFetchError,\n//   hideSpinner,\n//   pagination,\n// } from './js/pixabay-api';\n// import { renderImgCard } from './js/render-functions';\n\n// const searchForm = document.querySelector('.search-form');\n// const loadMoreBtn = document.querySelector('.load-more-btn');\n// let currentQuery = '';\n\n// searchForm.addEventListener('submit', handleSearch);\n// loadMoreBtn.addEventListener('click', loadMoreImages);\n\n// function handleSearch(event) {\n//   event.preventDefault();\n//   const form = event.currentTarget;\n//   const queryValue = form.elements.query.value.trim();\n\n//   if (queryValue === '') {\n//     iziToast.error({\n//       title: 'Error',\n//       message: 'Please enter a search term!',\n//       position: 'topRight',\n//     });\n//     return;\n//   }\n\n//   if (queryValue !== currentQuery) {\n//     pagination.page = 1;\n//     currentQuery = queryValue;\n//     cardContainer.innerHTML = '';\n//     loadMoreBtn.style.display = 'none';\n//   }\n\n//   fetchImages(queryValue)\n//     .then(data => {\n//       if (data.hits.length === 0) {\n//         iziToast.warning({\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//           position: 'topRight',\n//         });\n//         return;\n//       }\n\n//       renderImgCard(data.hits);\n\n//       if (data.totalHits > pagination.page * pagination.perPage) {\n//         loadMoreBtn.style.display = 'block';\n//       } else {\n//         iziToast.info({\n//           message: \"We're sorry, but you've reached the end of search results.\",\n//           position: 'topRight',\n//         });\n//       }\n//     })\n//     .catch(onFetchError)\n//     .finally(() => {\n//       form.reset();\n//       hideSpinner();\n//     });\n// }\n\n// function loadMoreImages() {\n//   pagination.page += 1;\n\n//   fetchImages(currentQuery)\n//     .then(data => {\n//       renderImgCard(data.hits);\n\n//       if (data.totalHits <= pagination.page * pagination.perPage) {\n//         loadMoreBtn.style.display = 'none';\n//         iziToast.info({\n//           message: \"We're sorry, but you've reached the end of search results.\",\n//           position: 'topRight',\n//         });\n//       }\n//     })\n//     .catch(onFetchError)\n//     .finally(hideSpinner);\n// }\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages, onFetchError, hideSpinner } from './js/pixabay-api';\nimport { renderImgCard } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\n\nsearchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const queryValue = form.elements.query.value.trim();\n\n  if (queryValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n  } else {\n    fetchImages(queryValue)\n      .then(data => {\n        if (data.hits.length === 0) {\n          iziToast.warning({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n          });\n        }\n        renderImgCard(data.hits);\n      })\n      .catch(onFetchError)\n      .finally(() => {\n        form.reset();\n        hideSpinner();\n      });\n  }\n}\n"],"names":["pagination","spinner","showSpinner","hideSpinner","fetchImages","query","params","axios","error","onFetchError","iziToast","cardContainer","renderImgCard","dataArr","markupImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","handleSearch","event","form","queryValue","data"],"mappings":"owBAOO,MAAMA,EAAa,CACxB,KAAM,EACN,QAAS,EACX,EAEMC,EAAU,SAAS,cAAc,SAAS,EAEhD,SAASC,GAAc,CACrBD,EAAQ,MAAM,QAAU,MAC1B,CAEO,SAASE,GAAc,CAC5BF,EAAQ,MAAM,QAAU,MAC1B,CAEO,eAAeG,EAAYC,EAAO,CACvC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUL,EAAW,QACrB,KAAMA,EAAW,IACrB,CAAG,EACDE,IAEA,GAAI,CAEF,OADiB,MAAMK,EAAM,IAAI,4BAA4BD,CAAM,EAAE,GACrD,IACjB,OAAQE,EAAO,CACd,MAAAC,EAAkB,EACZD,CACV,QAAY,CACRL,GACD,CACH,CAEO,SAASM,EAAaD,EAAO,CAClCE,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UACd,CAAG,CACH,CCJA,MAAMC,EAAgB,SAAS,cAAc,iBAAiB,EAEvD,SAASC,EAAcC,EAAS,CACrC,MAAMC,EAAeD,EAClB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,4CACoCL,CAAa;AAAA,kDACPD,CAAY,UAAUE,CAAI;AAAA;AAAA,qEAEPC,CAAK;AAAA,qEACLC,CAAK;AAAA,wEACFC,CAAQ;AAAA,yEACPC,CAAS;AAAA;AAAA;AAAA,cAI7E,EACA,KAAK,EAAE,EACVV,EAAc,UAAYG,EAET,IAAIQ,EAAe,oBAAqB,CACvD,aAAc,MACd,gBAAiB,QACrB,CAAG,EAEQ,QAAO,CAClB,CCkIA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAExDA,EAAW,iBAAiB,SAAUC,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACbE,EAAaD,EAAK,SAAS,MAAM,MAAM,OAEzCC,IAAe,GACjBjB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACT,SAAU,UAChB,CAAK,EAEDN,EAAYuB,CAAU,EACnB,KAAKC,GAAQ,CACRA,EAAK,KAAK,SAAW,GACvBlB,EAAS,QAAQ,CACf,QACE,2EACF,SAAU,UACtB,CAAW,EAEHE,EAAcgB,EAAK,IAAI,CAC/B,CAAO,EACA,MAAMnB,CAAY,EAClB,QAAQ,IAAM,CACbiB,EAAK,MAAK,EACVvB,GACR,CAAO,CAEP"}