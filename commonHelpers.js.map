{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst spinner = document.querySelector('.loader');\n\nfunction showSpinner() {\n  spinner.style.display = 'flex';\n}\n\nexport function hideSpinner() {\n  spinner.style.display = 'none';\n}\n\nexport async function fetchImages(query) {\n  const API_KEY = '44914505-36a6b847b314a6ef1bce975f7';\n  showSpinner();\n\n  try {\n    const response = await fetch(\n      `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`\n    );\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch images');\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    onFetchError(error);\n    throw error;\n  } finally {\n    hideSpinner();\n  }\n}\n\nexport function onFetchError(error) {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n","//\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst cardContainer = document.querySelector('.card-container');\n\nexport async function renderImgCard(dataArr) {\n  try {\n    const markupImages = dataArr\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) =>\n          `<li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                  <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n                  <ul class=\"gallery-text-list\">\n                      <li class=\"gallery-text-item\"><h3>Likes</h3><p>${likes}</p></li>\n                      <li class=\"gallery-text-item\"><h3>Views</h3><p>${views}</p></li>\n                      <li class=\"gallery-text-item\"><h3>Comments</h3><p>${comments}</p></li>\n                      <li class=\"gallery-text-item\"><h3>Downloads</h3><p>${downloads}</p></li>\n                  </ul>\n              </a>\n          </li>`\n      )\n      .join('');\n\n    cardContainer.innerHTML = markupImages;\n\n    const lightbox = new SimpleLightbox('.card-container a', {\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n    });\n\n    lightbox.refresh();\n  } catch (error) {\n    // Обробка помилок, якщо потрібно\n    console.error('Error rendering images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to render images',\n      position: 'topRight',\n    });\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages, onFetchError, hideSpinner } from './js/pixabay-api';\nimport { renderImgCard } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst cardContainer = document.querySelector('.card-container');\nconst loadMoreContainer = document.querySelector('.load-more-container');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', handleSearch);\n\nloadMoreButton.addEventListener('click', handleLoadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const queryValue = form.elements.query.value.trim();\n\n  if (queryValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  try {\n    const data = await fetchImages(queryValue);\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    renderImgCard(data.hits);\n  } catch (error) {\n    onFetchError(error);\n  } finally {\n    form.reset();\n    hideSpinner();\n  }\n}\n\n// function handleSearch(event) {\n//   event.preventDefault();\n//   const form = event.currentTarget;\n//   currentQuery = form.elements.query.value.trim();\n\n//   if (currentQuery === '') {\n//     iziToast.error({\n//       title: 'Error',\n//       message: 'Please enter a search term!',\n//       position: 'topRight',\n//     });\n//     return;\n//   }\n\n//   currentPage = 1; // Скидаємо сторінку до початкового значення при новому запиті\n//   performSearch();\n// }\n\n// async function performSearch() {\n//   showSpinner();\n//   try {\n//     const data = await fetchImages(currentQuery, currentPage);\n//     if (data.hits.length === 0) {\n//       iziToast.warning({\n//         title: 'No Results',\n//         message:\n//           'Sorry, there are no images matching your search query. Please try again!',\n//         position: 'topRight',\n//       });\n//     }\n//     renderImgCard(data.hits);\n//     if (data.totalHits > cardContainer.children.length) {\n//       showLoadMoreButton();\n//     } else {\n//       hideLoadMoreButton();\n//     }\n//   } catch (error) {\n//     onFetchError(error);\n//   } finally {\n//     hideSpinner();\n//   }\n// }\n\n// async function handleLoadMore() {\n//   currentPage++;\n//   showSpinner();\n//   try {\n//     const data = await fetchImages(currentQuery, currentPage);\n//     renderImgCard(data.hits);\n//     if (data.totalHits <= cardContainer.children.length) {\n//       hideLoadMoreButton();\n//     }\n//   } catch (error) {\n//     onFetchError(error);\n//   } finally {\n//     hideSpinner();\n//   }\n// }\n\n// function showLoadMoreButton() {\n//   loadMoreContainer.style.display = 'block';\n// }\n\n// function hideLoadMoreButton() {\n//   loadMoreContainer.style.display = 'none';\n// }\n\n// function showSpinner() {\n//   loader.style.visibility = 'visible';\n// }\n\n// function hideSpinner() {\n//   loader.style.visibility = 'hidden';\n// }\n"],"names":["spinner","showSpinner","hideSpinner","fetchImages","query","API_KEY","response","error","onFetchError","iziToast","cardContainer","renderImgCard","dataArr","markupImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","loadMoreButton","handleSearch","event","form","queryValue","data"],"mappings":"6vBAOA,MAAMA,EAAU,SAAS,cAAc,SAAS,EAEhD,SAASC,GAAc,CACrBD,EAAQ,MAAM,QAAU,MAC1B,CAEO,SAASE,GAAc,CAC5BF,EAAQ,MAAM,QAAU,MAC1B,CAEO,eAAeG,EAAYC,EAAO,CACvC,MAAMC,EAAU,qCAChBJ,IAEA,GAAI,CACF,MAAMK,EAAW,MAAM,MACrB,gCAAgCD,CAAO,MAAMD,CAAK,0DACxD,EAEI,GAAI,CAACE,EAAS,GACZ,MAAM,IAAI,MAAM,wBAAwB,EAI1C,OADa,MAAMA,EAAS,MAE7B,OAAQC,EAAO,CACd,MAAAC,EAAkB,EACZD,CACV,QAAY,CACRL,GACD,CACH,CAEO,SAASM,EAAaD,EAAO,CAClCE,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UACd,CAAG,CACH,CCzCA,MAAMC,EAAgB,SAAS,cAAc,iBAAiB,EAEvD,eAAeC,EAAcC,EAAS,CAC3C,GAAI,CACF,MAAMC,EAAeD,EAClB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,8CACoCL,CAAa;AAAA,oDACPD,CAAY,UAAUE,CAAI;AAAA;AAAA,uEAEPC,CAAK;AAAA,uEACLC,CAAK;AAAA,0EACFC,CAAQ;AAAA,2EACPC,CAAS;AAAA;AAAA;AAAA,gBAI7E,EACA,KAAK,EAAE,EAEVV,EAAc,UAAYG,EAET,IAAIQ,EAAe,oBAAqB,CACvD,aAAc,MACd,gBAAiB,QACvB,CAAK,EAEQ,QAAO,CACjB,OAAQd,EAAO,CAEd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9CE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0BACT,SAAU,UAChB,CAAK,CACF,CACH,CC5CA,MAAMa,EAAa,SAAS,cAAc,cAAc,EAClC,SAAS,cAAc,iBAAiB,EACpC,SAAS,cAAc,sBAAsB,EACvE,MAAMC,EAAiB,SAAS,cAAc,YAAY,EAC3C,SAAS,cAAc,SAAS,EAI/CD,EAAW,iBAAiB,SAAUE,CAAY,EAElDD,EAAe,iBAAiB,QAAS,cAAc,EAEvD,eAAeC,EAAaC,EAAO,CACjCA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACbE,EAAaD,EAAK,SAAS,MAAM,MAAM,OAE7C,GAAIC,IAAe,GAAI,CACrBlB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAMmB,EAAO,MAAMzB,EAAYwB,CAAU,EAErCC,EAAK,KAAK,SAAW,GACvBnB,EAAS,QAAQ,CACf,QACE,2EACF,SAAU,UAClB,CAAO,EAGHE,EAAciB,EAAK,IAAI,CACxB,MAAe,CACdpB,EAAkB,CACtB,QAAY,CACRkB,EAAK,MAAK,EACVxB,GACD,CACH"}